{% extends 'admin_dashboard/staff/base.html' %}
{% block content %}
{% load static %}

<!-- <style>
  @media (max-width: 576px) {
    .text-sm-sm {
      font-size: 0.75rem; /* Adjust as needed */
    }
  }
</style> --> 
{% if request.user.executive_manager %}
<div class="dashboard-main-body admin_dashboard">
  <div class="dash-title">Executive Manager</div>
    <div class="row gy-4">
      <div class="col-xxl-3 col-md-4 col-6">
        <div class="desh-card">
          <div class="desh-card-body">
            <div class="admin-icon">
              <iconify-icon icon="mingcute:user-follow-fill" class="icon team_staf"></iconify-icon>
            </div>
            <div class="admin-title">Total Inquiry : {{ executive_manager_inquiry_data|length }}</div>
            <!-- <div id="active-user-chart" class="remove-tooltip-title rounded-tooltip-value"></div>  -->
          </div>
        </div>
      </div>

      <div class="col-xxl-3 col-md-4 col-6">
        <div class="desh-card">
          <div class="desh-card-body">
            <div class="admin-icon">
              <iconify-icon icon="mingcute:user-follow-fill" class="icon team_lgin "></iconify-icon>
            </div>
            <div class="admin-title">Total Interested Inquiry : {{ interested_count }}</div>
            <!-- <p class="fw-semibold">{{ logged_in_count }}</p> -->
            <!-- <div id="active-user-chart" class="remove-tooltip-title rounded-tooltip-value"></div> -->
          </div>
        </div>
      </div>

      <div class="col-xxl-3 col-md-4 col-6">
        <div class="desh-card">
          <div class="desh-card-body">
            <div class="admin-icon">
              <iconify-icon icon="mingcute:user-follow-fill" class="icon team_lgin "></iconify-icon>
            </div>
            <div class="admin-title">Total Not Interested Inquiry {{ not_interested_count }}</div>
            <!-- <p class="fw-semibold">{{ logged_in_count }}</p> -->
            <!-- <div id="active-user-chart" class="remove-tooltip-title rounded-tooltip-value"></div> -->
          </div>
        </div>
      </div>

      <div class="col-xxl-3 col-md-4 col-6">
        <div class="desh-card">
          <div class="desh-card-body">
            <div class="admin-icon">
              <iconify-icon icon="iconamoon:discount-fill" class="icon team_assstf"></iconify-icon>
            </div>
            <div class="admin-title">Total New Inquiry: {{ new_inquiries_count }}</div>
            <!-- <p class="fw-semibold">{{ logged_in_count }}</p> -->
            <!-- <div id="active-user-chart" class="remove-tooltip-title rounded-tooltip-value"></div> -->
          </div>
        </div>
      </div>
      <div class="card h-100 p-0 radius-12">
        <div
          class="card-header border-bottom bg-base py-16 px-24 d-flex align-items-center flex-wrap gap-3 justify-content-between">
  
          <div class="d-flex align-items-center flex-wrap gap-3">
            <form class="navbar-search">
              <input type="text" id="searchInput" class="bg-base h-40-px w-100" name="search" placeholder="Search"
                onkeyup="searchTable()">
              <iconify-icon icon="ion:search-outline" class="icon"></iconify-icon>
            </form>
          </div>
  
          <a href="{% url 'add_inquiry' %}"
            class="btn text-sm btn-sm text-content radius-8 d-flex align-items-center gap-2">
            <!-- <iconify-icon icon="ic:baseline-plus" class="icon text-xl line-height-1"></iconify-icon> -->
            Add New Inquiry
          </a>
          <a href="{% url 'add_inquiry' %}"
            class="btn text-sm btn-sm user-icon p-4 radius-8 d-flex align-items-center gap-2">
            <iconify-icon icon="ic:baseline-plus" class="icon text-xl line-height-1"></iconify-icon>
            <!-- Add new staff -->
          </a>
        </div>
        <div>
        </div>
        <button type="button" class="btn btn-success m-1" data-bs-toggle="modal" data-bs-target="#statusSuccessModal"
          hidden>Success Modal</button>
        {% if messages %}
        <script>
          document.addEventListener("DOMContentLoaded", function () {
            var myModal = new bootstrap.Modal(document.getElementById('statusSuccessModal'));
            myModal.show();
          });
        </script>
        {% endif %}
        <div class="card-body p-24">
          <div class="table-responsive scroll-sm">
            <!-- {% if messages %}
            {% for message in messages %}
            <div class="alert alert-success">
              {{ message }}
            </div>
            {% endfor %}
            {% endif %} -->

            <table class="table bordered-table sm-table mb-0" id="myTable">
              <thead>
                <tr>
                  <th>SR. NO</th>
                  <th>Name</th>
                  <th>Mobile No</th>
                  <th>Address</th>
                
                  <th>Status</th>
                  <th>Assgin By</th>
                    <th>Inquiry Status</th>
                  <th>Created Date</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
              <tbody>
                {% for qry in executive_manager_inquiry_data %}
                <tr>
                  <td>{{ forloop.counter}}</td>
                  <td>{{ qry.full_name }}</td>
                  <td>{{ qry.contact_number }}</td>
                  <td>{{ qry.address }}</td>
                
                  {% if qry.is_interested == False %}
                  <td style="color: brown;" >Not Interested</td>
                  {% else %}
                  <td style="color: rgb(61, 42, 165);" >Interested</td>
                  {% endif %}
                  <td>{{ qry.assigned_user.name }}</td>
                    <td style="color:green;" >{{qry.inquiry_status}}</td>
                  <td>{{ qry.created_at }}</td>
                
                  {% if qry.is_interested == True %}
                  <td>
                    <a class="btn btn-outline-success btn-sm" href="{% url 'update-inquiry-forms' qry.id %}" ><i
                        class="bi bi-eye"></i>
                        View
                      </a>
                  </td>
                  {% else %}
                  <td>
                    <a class="btn btn-outline-secondary btn-sm"  ><i
                        class="bi bi-eye" ></i>
                        View
                      </a>
                  </td>
                  {% endif %}
                 
                  
               
                
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
      {% elif request.user.delivery_manager and  request.user.is_team_leader %}
      <div class="dashboard-main-body admin_dashboard">
        <div class="dash-title">Delivery Manager </div>
          <div class="row gy-4">
            <div class="col-xxl-3 col-md-4 col-6">
              <div class="desh-card">
                <div class="desh-card-body">
                  <div class="admin-icon">
                    <iconify-icon icon="mingcute:user-follow-fill" class="icon team_staf"></iconify-icon>
                  </div>
                  <div class="admin-title">Total Inquiry : {{ on_boarding_manager_inquiry_data|length }}</div>
                  <!-- <div id="active-user-chart" class="remove-tooltip-title rounded-tooltip-value"></div>  -->
                </div>
              </div>
            </div>
            <div class="col-xxl-3 col-md-4 col-6">
              <div class="desh-card">
                <div class="desh-card-body">
                  <div class="admin-icon">
                    <iconify-icon icon="iconamoon:discount-fill" class="icon team_assstf"></iconify-icon>
                  </div>
                  <div class="admin-title">Total New Inquiry: {{ new_inquiries_count }}</div>
                  <!-- <p class="fw-semibold">{{ logged_in_count }}</p> -->
                  <!-- <div id="active-user-chart" class="remove-tooltip-title rounded-tooltip-value"></div> -->
                </div>
              </div>
            </div>
            <div class="col-xxl-3 col-md-4 col-6">
              <div class="desh-card">
                <div class="desh-card-body">
                  <div class="admin-icon">
                    <iconify-icon icon="mingcute:user-follow-fill" class="icon team_lgin "></iconify-icon>
                  </div>
                  <div class="admin-title">Total Pending Inquiry : {{ pending_inquiries_count }}</div>
                  <!-- <p class="fw-semibold">{{ logged_in_count }}</p> -->
                  <!-- <div id="active-user-chart" class="remove-tooltip-title rounded-tooltip-value"></div> -->
                </div>
              </div>
            </div>
      
            <div class="col-xxl-3 col-md-4 col-6">
              <div class="desh-card">
                <div class="desh-card-body">
                  <div class="admin-icon">
                    <iconify-icon icon="mingcute:user-follow-fill" class="icon team_lgin "></iconify-icon>
                  </div>
                  <div class="admin-title">Total Delivered Inquiry: {{ completed_inquiries_count }}</div>
                  <!-- <p class="fw-semibold">{{ logged_in_count }}</p> -->
                  <!-- <div id="active-user-chart" class="remove-tooltip-title rounded-tooltip-value"></div> -->
                </div>
              </div>
            </div>
      

            <div class="card h-100 p-0 radius-12">
              <div
                class="card-header border-bottom bg-base py-16 px-24 d-flex align-items-center flex-wrap gap-3 justify-content-between">
        
                <div class="d-flex align-items-center flex-wrap gap-3">
                  <form class="navbar-search">
                    <input type="text" id="searchInput" class="bg-base h-40-px w-100" name="search" placeholder="Search"
                      onkeyup="searchTable()">
                    <iconify-icon icon="ion:search-outline" class="icon"></iconify-icon>
                  </form>
                </div>
        
              </div>
              <div>
              </div>
              <button type="button" class="btn btn-success m-1" data-bs-toggle="modal" data-bs-target="#statusSuccessModal"
                hidden>Success Modal</button>
              {% if messages %}
              <script>
                document.addEventListener("DOMContentLoaded", function () {
                  var myModal = new bootstrap.Modal(document.getElementById('statusSuccessModal'));
                  myModal.show();
                });
              </script>
              {% endif %}
              <div class="card-body p-24">
                <div class="table-responsive scroll-sm">
                  <!-- {% if messages %}
                  {% for message in messages %}
                  <div class="alert alert-success">
                    {{ message }}
                  </div>
                  {% endfor %}
                  {% endif %} -->
      
                  <table class="table bordered-table sm-table mb-0" id="myTable">
                    <thead>
                      <tr>
                        <th>SR. NO</th>
                        <th>Name</th>
                        <th>Mobile No</th>
                        <th>Address</th>
                      
                        <th>Status</th>
                        <th>Assgin By</th>
                          <th>Inquiry Status</th>
                        <th>Created Date</th>
                        <th>Action</th>
                      </tr>
                    </thead>
                    <tbody>
                    <tbody>
                      {% for qry in delivery_manager_inquiry_data %}
                      <tr>
                        <td>{{ forloop.counter}}</td>
                        <td>{{ qry.full_name }}</td>
                        <td>{{ qry.contact_number }}</td>
                        <td>{{ qry.address }}</td>
                      
                        {% if qry.is_interested == True %}
                        <td style="color: rgb(42, 165, 134); font-weight: bold;">Interested</td>

                        {% endif %}
                        <td>{{ qry.assigned_user.name }}</td>
                        {% if  qry.inquiry_status == "Pending Delivery" %}
                          <td style="color:rgb(241, 147, 5);" >{{qry.inquiry_status}}</td>
                        <td>{{ qry.created_at|date:"d-M-Y" }}</td>
                        {% elif  qry.inquiry_status == "New Inquiry" %}
                          <td style="color:rgb(15, 45, 216);" >{{qry.inquiry_status}}</td>
                        {% elif  qry.inquiry_status == "Completed" %}
                          <td style="color:rgb(13, 92, 30);" >{{qry.inquiry_status}}</td>
                        <td>{{ qry.created_at|date:"d-M-Y" }}</td>
                        {% endif %}
                        {% if qry.is_interested == True %}
                        <td>
                          <a class="btn btn-outline-success btn-sm" href="{% url 'update_inquiry' qry.id %}"  ><i
                              class="bi bi-eye"></i>
                              View
                            </a>
                            
                            <a class="btn btn-outline-info btn-sm" onclick="updateStatus('{{ qry.id }}')">
                              <i class="bi bi-eye"></i>
                              Update Status
                            </a>
                            
                        </td>
                        <td>
                          
                        </td>
                        
                    </td>
                        {% else %}
                        
                        {% endif %}
                       
                        
                     
                      
                      </tr>
                      {% endfor %}
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
      {% elif request.user.on_boarding_manager and  request.user.is_team_leader %}
      <div class="dashboard-main-body admin_dashboard">
        <div class="dash-title">On Boarding Manager</div>
          <div class="row gy-4">
            <div class="col-xxl-3 col-md-4 col-6">
              <div class="desh-card">
                <div class="desh-card-body">
                  <div class="admin-icon">
                    <iconify-icon icon="mingcute:user-follow-fill" class="icon team_staf"></iconify-icon>
                  </div>
                  <div class="admin-title">Total Inquiry : {{ on_boarding_manager_inquiry_data|length }}</div>
                  <!-- <div id="active-user-chart" class="remove-tooltip-title rounded-tooltip-value"></div>  -->
                </div>
              </div>
            </div>
            <div class="col-xxl-3 col-md-4 col-6">
              <div class="desh-card">
                <div class="desh-card-body">
                  <div class="admin-icon">
                    <iconify-icon icon="iconamoon:discount-fill" class="icon team_assstf"></iconify-icon>
                  </div>
                  <div class="admin-title">Total New Inquiry: {{ new_inquiries_count }}</div>
                  <!-- <p class="fw-semibold">{{ logged_in_count }}</p> -->
                  <!-- <div id="active-user-chart" class="remove-tooltip-title rounded-tooltip-value"></div> -->
                </div>
              </div>
            </div>
            <div class="col-xxl-3 col-md-4 col-6">
              <div class="desh-card">
                <div class="desh-card-body">
                  <div class="admin-icon">
                    <iconify-icon icon="mingcute:user-follow-fill" class="icon team_lgin "></iconify-icon>
                  </div>
                  <div class="admin-title">Total Interested Inquiry : {{ interested_count }}</div>
                  <!-- <p class="fw-semibold">{{ logged_in_count }}</p> -->
                  <!-- <div id="active-user-chart" class="remove-tooltip-title rounded-tooltip-value"></div> -->
                </div>
              </div>
            </div>
      
            <div class="col-xxl-3 col-md-4 col-6">
              <div class="desh-card">
                <div class="desh-card-body">
                  <div class="admin-icon">
                    <iconify-icon icon="mingcute:user-follow-fill" class="icon team_lgin "></iconify-icon>
                  </div>
                  <div class="admin-title">Total Delivered Inquiry {{ not_interested_count }}</div>
                  <!-- <p class="fw-semibold">{{ logged_in_count }}</p> -->
                  <!-- <div id="active-user-chart" class="remove-tooltip-title rounded-tooltip-value"></div> -->
                </div>
              </div>
            </div>
      

            <div class="card h-100 p-0 radius-12">
              <div
                class="card-header border-bottom bg-base py-16 px-24 d-flex align-items-center flex-wrap gap-3 justify-content-between">
        
                <div class="d-flex align-items-center flex-wrap gap-3">
                  <form class="navbar-search">
                    <input type="text" id="searchInput" class="bg-base h-40-px w-100" name="search" placeholder="Search"
                      onkeyup="searchTable()">
                    <iconify-icon icon="ion:search-outline" class="icon"></iconify-icon>
                  </form>
                </div>
        
              </div>
              <div>
              </div>
              <button type="button" class="btn btn-success m-1" data-bs-toggle="modal" data-bs-target="#statusSuccessModal"
                hidden>Success Modal</button>
              {% if messages %}
              <script>
                document.addEventListener("DOMContentLoaded", function () {
                  var myModal = new bootstrap.Modal(document.getElementById('statusSuccessModal'));
                  myModal.show();
                });
              </script>
              {% endif %}
              <div class="card-body p-24">
                <div class="table-responsive scroll-sm">
                  <!-- {% if messages %}
                  {% for message in messages %}
                  <div class="alert alert-success">
                    {{ message }}
                  </div>
                  {% endfor %}
                  {% endif %} -->
      
                  <table class="table bordered-table sm-table mb-0" id="myTable">
                    <thead>
                      <tr>
                        <th>SR. NO</th>
                        <th>Name</th>
                        <th>Mobile No</th>
                        <th>Address</th>
                      
                        <th>Status</th>
                        <th>Assgin By</th>
                          <th>Inquiry Status</th>
                        <th>Created Date</th>
                        <th>Action</th>
                      </tr>
                    </thead>
                    <tbody>
                    <tbody>
                      {% for qry in on_boarding_manager_inquiry_data %}
                      <tr>
                        <td>{{ forloop.counter}}</td>
                        <td>{{ qry.full_name }}</td>
                        <td>{{ qry.contact_number }}</td>
                        <td>{{ qry.address }}</td>
                      
                        {% if qry.is_interested == True %}
                        <td style="color: rgb(42, 165, 134); font-weight: bold;">Interested</td>

                        {% endif %}
                        <td>{{ qry.assigned_user.name }}</td>
                          <td style="color:green;" >{{qry.inquiry_status}}</td>
                        <td>{{ qry.created_at|date:"d-M-Y" }}</td>
                      
                        {% if qry.is_interested == True %}
                        <td>
                          <a class="btn btn-outline-success btn-sm" href="{% url 'update_inquiry' qry.id %}"  ><i
                              class="bi bi-eye"></i>
                              View
                            </a>
                        </td>
                        {% else %}
                        
                        {% endif %}
                       
                        
                     
                      
                      </tr>
                      {% endfor %}
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
      {% elif request.user.is_team_leader and request.user.dsr_manager  %}
<div class="dashboard-main-body admin_dashboard">
  <div class="dash-title">DSR Manager</div>
    <div class="row gy-4">
      <div class="col-xxl-3 col-md-4 col-6">
        <div class="desh-card">
          <div class="desh-card-body">
            <div class="admin-icon">
              <iconify-icon icon="mingcute:user-follow-fill" class="icon team_staf"></iconify-icon>
            </div>
            <div class="admin-title">Total Inquiry : {{ not_interested_inquiry_data|length }}</div>
            <!-- <div id="active-user-chart" class="remove-tooltip-title rounded-tooltip-value"></div>  -->
          </div>
        </div>
      </div>

      <div class="col-xxl-3 col-md-4 col-6">
        <div class="desh-card">
          <div class="desh-card-body">
            <div class="admin-icon">
              <iconify-icon icon="mingcute:user-follow-fill" class="icon team_lgin "></iconify-icon>
            </div>
            <div class="admin-title">Total Not Interested:  {{ not_interested_inquiry_data|length }}</div>
            <!-- <p class="fw-semibold">{{ logged_in_count }}</p> -->
            <!-- <div id="active-user-chart" class="remove-tooltip-title rounded-tooltip-value"></div> -->
          </div>
        </div>
      </div>

     
      <div class="card h-100 p-0 radius-12">
        <div
          class="card-header border-bottom bg-base py-16 px-24 d-flex align-items-center flex-wrap gap-3 justify-content-between">
  
          <div class="d-flex align-items-center flex-wrap gap-3">
            <form class="navbar-search">
              <input type="text" id="searchInput" class="bg-base h-40-px w-100" name="search" placeholder="Search"
                onkeyup="searchTable()">
              <iconify-icon icon="ion:search-outline" class="icon"></iconify-icon>
            </form>
          </div>
        </div>
        <div>
        </div>
        <button type="button" class="btn btn-success m-1" data-bs-toggle="modal" data-bs-target="#statusSuccessModal"
          hidden>Success Modal</button>
        {% if messages %}
        <script>
          document.addEventListener("DOMContentLoaded", function () {
            var myModal = new bootstrap.Modal(document.getElementById('statusSuccessModal'));
            myModal.show();
          });
        </script>
        {% endif %}
        <div class="card-body p-24">
          <div class="table-responsive scroll-sm">
            <!-- {% if messages %}
            {% for message in messages %}
            <div class="alert alert-success">
              {{ message }}
            </div>
            {% endfor %}
            {% endif %} -->
  
  
            <table class="table bordered-table sm-table mb-0" id="myTable">
              <thead>
                <tr>
                  <th>SR. NO</th>
                  <th>Name</th>
                  <th>Mobile No</th>
                  <th>Address</th>
                  <!-- <th>Inquiry Status</th> -->
                  <th>Status</th>
                  <th>Assgin By</th>
                  <th>Created Date</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
              <tbody>
                {% for qry in not_interested_inquiry_data %}
                <tr>
                  <td>{{ forloop.counter}}</td>
                  <td>{{ qry.full_name }}</td>
                  <td>{{ qry.contact_number }}</td>
                  <td>{{ qry.address }}</td>
                  <!-- <td style="color:green;" >{{qry.inquiry_status}}</td> -->
                  {% if qry.is_interested == False %}
                  <td style="color: brown;" >Not Intrested</td>
                  {% endif %}
                  <th>-</th>
                  <td>{{ qry.created_at|date:"d-M-Y" }}</td>
                
                
                  <td>
                    <a class="btn btn-outline-success btn-sm" href="{% url 'update_inquiry' qry.id %}"><i
                        class="bi bi-eye"></i>
                        View
                      </a>
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>

{% elif request.user.is_team_leader %}
<div class="dashboard-main-body admin_dashboard">
  <div class="dash-title">Staff Users</div>
  <form method="GET" class="row align-items-center pb-3 mb-1">
    <div class="col-12 col-sm-6 col-md-4 col-lg-3">
      <input type="date" name="start_date" value="{{ start_date|date:'Y-m-d' }}" class="form-control"
        placeholder="Start Date">
    </div>
    <div class="col-12 col-sm-6 col-md-4 col-lg-3">
      <input type="date" name="end_date" value="{{ end_date|date:'Y-m-d' }}" class="form-control"
        placeholder="End Date">
    </div>
    <div class="col-12 col-md-4 col-lg-2">
      <button type="submit" class="btn w-100">Filter</button>
    </div>
  </form>




    <div class="row gy-4">
      <div class="col-xxl-3 col-md-4 col-6">
        <div class="desh-card">
          <div class="desh-card-body">
            <div class="admin-icon">
              <iconify-icon icon="mingcute:user-follow-fill" class="icon team_staf"></iconify-icon>
            </div>
            <div class="admin-title">Total Staff : {{ total_staff }}</div>
            <!-- <div id="active-user-chart" class="remove-tooltip-title rounded-tooltip-value"></div>  -->
          </div>
        </div>
      </div>

      <div class="col-xxl-3 col-md-4 col-6">
        <div class="desh-card">
          <div class="desh-card-body">
            <div class="admin-icon">
              <iconify-icon icon="mingcute:user-follow-fill" class="icon team_lgin "></iconify-icon>
            </div>
            <div class="admin-title">Login Staff : {{ logged_in_count }}</div>
            <!-- <p class="fw-semibold">{{ logged_in_count }}</p> -->
            <!-- <div id="active-user-chart" class="remove-tooltip-title rounded-tooltip-value"></div> -->
          </div>
        </div>
      </div>

      <div class="col-xxl-3 col-md-4 col-6">
        <div class="desh-card">
          <div class="desh-card-body">
            <div class="admin-icon">
              <iconify-icon icon="iconamoon:discount-fill" class="icon total_lost"></iconify-icon>
            </div>
            <div class="admin-title">Log-out : {{ logged_out_count }}</div>
            <!-- <p class="fw-semibold">{{ logged_in_count }}</p> -->
            <!-- <div id="active-user-chart" class="remove-tooltip-title rounded-tooltip-value"></div> -->
          </div>
        </div>
      </div>

      <div class="col-xxl-3 col-md-4 col-6">
        <div class="desh-card">
          <div class="desh-card-body">
            <div class="admin-icon">
              <iconify-icon icon="iconamoon:discount-fill" class="icon team_assstf"></iconify-icon>
            </div>
            <div class="admin-title">Associate staff : {{ logged_out_count }}</div>
            <!-- <p class="fw-semibold">{{ logged_in_count }}</p> -->
            <!-- <div id="active-user-chart" class="remove-tooltip-title rounded-tooltip-value"></div> -->
          </div>
        </div>
      </div>

      <div class="col-xxl-3 col-md-4 col-6">
        <div class="desh-card ">
          <div class="desh-card-body">
            <div class="admin-icon">
              <iconify-icon icon="iconamoon:discount-fill" class="icon team_t_lead"></iconify-icon>
            </div>
            <div class="admin-title">Total Upload Lead : {{ total_uplode_leads }}</div>
            <!-- <p class="fw-semibold">{{ logged_in_count }}</p> -->
            <!-- <div id="active-user-chart" class="remove-tooltip-title rounded-tooltip-value"></div> -->
          </div>
        </div>
      </div>

      <div class="col-xxl-3 col-md-4 col-6">
        <a href="{% url 'all_leads_data' 'total_leads_tag' %}" style="display: block;">
          <div class="desh-card">
            <div class="desh-card-body">
              <div class="admin-icon">
                <iconify-icon icon="iconamoon:discount-fill" class="icon total_lead"></iconify-icon>
              </div>
              <div class="admin-title">Total Lead : {{ total_leads }}</div>
              <!-- <p class="fw-semibold">{{ logged_in_count }}</p> -->
              <!-- <div id="active-user-chart" class="remove-tooltip-title rounded-tooltip-value"></div> -->
            </div>
          </div>
        </a>
      </div>

      <div class="col-xxl-3 col-md-4 col-6">
        <a href="{% url 'all_leads_data' 'total_visit_tag' %}" style="display: block;">
          <div class="desh-card">
            <div class="desh-card-body">
              <div class="admin-icon">
                <iconify-icon icon="iconamoon:discount-fill" class="icon total_visit"></iconify-icon>
              </div>
              <div class="admin-title">Total Visits : {{ visits_leads }}</div>
              <!-- <p class="fw-semibold">{{ logged_in_count }}</p> -->
              <!-- <div id="active-user-chart" class="remove-tooltip-title rounded-tooltip-value"></div> -->
            </div>
          </div>
        </a>
      </div>

      <div class="col-xxl-3 col-md-4 col-6">
        <a href="{% url 'all_leads_data' 'total_interested_tag' %}" style="display: block;">
          <div class="desh-card">
            <div class="desh-card-body">
              <div class="admin-icon">
                <iconify-icon icon="iconamoon:discount-fill" class="icon team_interented"></iconify-icon>
              </div>
              <div class="admin-title">Interested : {{ total_interested_leads }}</div>
              <!-- <p class="fw-semibold">{{ logged_in_count }}</p> -->
              <!-- <div id="active-user-chart" class="remove-tooltip-title rounded-tooltip-value"></div> -->
            </div>
          </div>
        </a>
      </div>

      <div class="col-xxl-3 col-md-4 col-6">
        <a href="{% url 'all_leads_data' 'total_not_interested_tag' %}" style="display: block;">
          <div class="desh-card">
            <div class="desh-card-body">
              <div class="admin-icon">
                <iconify-icon icon="iconamoon:discount-fill" class="icon team_ntint"></iconify-icon>
              </div>
              <div class="admin-title">Not Interested : {{ total_not_interested_leads }}</div>
              <!-- <p class="fw-semibold">{{ logged_in_count }}</p> -->
              <!-- <div id="active-user-chart" class="remove-tooltip-title rounded-tooltip-value"></div> -->
            </div>
          </div>
        </a>
      </div>

      <div class="col-xxl-3 col-md-4 col-6">
        <a href="{% url 'all_leads_data' 'total_other_location_tag' %}" style="display: block;">
          <div class="desh-card">
            <div class="desh-card-body">
              <div class="admin-icon">
                <iconify-icon icon="iconamoon:discount-fill" class="icon team_ltion"></iconify-icon>
              </div>
              <div class="admin-title">Other Location : {{ other_location_leads }}</div>
              <!-- <p class="fw-semibold">{{ logged_in_count }}</p> -->
              <!-- <div id="active-user-chart" class="remove-tooltip-title rounded-tooltip-value"></div> -->
            </div>
          </div>
        </a>
      </div>

      <div class="col-xxl-3 col-md-4 col-6">
        <a href="{% url 'all_leads_data' 'total_not_picked_tag' %}" style="display: block;">
          <div class="desh-card">
            <div class="desh-card-body">
              <div class="admin-icon">
                <iconify-icon icon="iconamoon:discount-fill" class="icon team_ntpck"></iconify-icon>
              </div>
              <div class="admin-title">Not Picked : {{ not_picked_leads }}</div>
              <!-- <p class="fw-semibold">{{ logged_in_count }}</p> -->
              <!-- <div id="active-user-chart" class="remove-tooltip-title rounded-tooltip-value"></div> -->
            </div>
          </div>
        </a>
      </div>

      <div class="col-xxl-3 col-md-4 col-6">
        <a href="{% url 'all_leads_data' 'total_lost_tag' %}" style="display: block;">
          <div class="desh-card">
            <div class="desh-card-body">
              <div class="admin-icon">
                <iconify-icon icon="iconamoon:discount-fill" class="icon total_lost"></iconify-icon>
              </div>
              <div class="admin-title">Lost Leads : {{ lost_leads }}</div>
              <!-- <p class="fw-semibold">{{ logged_in_count }}</p> -->
              <!-- <div id="active-user-chart" class="remove-tooltip-title rounded-tooltip-value"></div> -->
            </div>
          </div>
      </div>
      </a>
    </div>
    

  {% comment %} <div class="dashboard-main-body">

      <div class="dash-title">Team</div>

     {% endcomment %}

    <div class="card h-100 p-0 radius-12">
      <div
        class="card-header border-bottom bg-base py-16 px-24 d-flex align-items-center flex-wrap gap-3 justify-content-between">

        <div class="d-flex align-items-center flex-wrap gap-3">
          <form class="navbar-search">
            <input type="text" id="searchInput" class="bg-base h-40-px w-100" name="search" placeholder="Search"
              onkeyup="searchTable()">
            <iconify-icon icon="ion:search-outline" class="icon"></iconify-icon>
          </form>
        </div>

        <a href="{% url 'add_staff' %}"
          class="btn text-sm btn-sm text-content radius-8 d-flex align-items-center gap-2">
          <!-- <iconify-icon icon="ic:baseline-plus" class="icon text-xl line-height-1"></iconify-icon> -->
          Add new staff
        </a>
        <a href="{% url 'add_staff' %}"
          class="btn text-sm btn-sm user-icon p-4 radius-8 d-flex align-items-center gap-2">
          <iconify-icon icon="ic:baseline-plus" class="icon text-xl line-height-1"></iconify-icon>
          <!-- Add new staff -->
        </a>
      </div>
      <div>
        <!-- <a href="newlead.html" style="margin: 1%;" class="btn ">
          <iconify-icon icon="ic:baseline-plus" class="icon text-xl line-height-1"></iconify-icon>
          NEW LEAD
        </a> -->

      </div>
      <button type="button" class="btn btn-success m-1" data-bs-toggle="modal" data-bs-target="#statusSuccessModal"
        hidden>Success Modal</button>
      {% if messages %}
      <script>
        document.addEventListener("DOMContentLoaded", function () {
          var myModal = new bootstrap.Modal(document.getElementById('statusSuccessModal'));
          myModal.show();
        });
      </script>
      {% endif %}
      <div class="card-body p-24">
        <div class="table-responsive scroll-sm">
          <!-- {% if messages %}
          {% for message in messages %}
          <div class="alert alert-success">
            {{ message }}
          </div>
          {% endfor %}
          {% endif %} -->


          <table class="table bordered-table sm-table mb-0" id="myTable">
            <thead>
              <tr>
                <th>SR. NO</th>
                <th>Name</th>
                <th>Email id</th>
                <th>Mobile No</th>
                <th>Created Date</th>
                {% comment %} <th>Updated Date</th> {% endcomment %}
                <th>Status</th>
                <th>Duration</th>
                
                <th>Leads</th>
                <th>Incentives</th>
                <th>Earn</th>
             
                <th>Edit Now</th>
              </tr>
            </thead>
            <tbody>
            <tbody>
              {% for log in user_logs %}
              <tr>
                <td>{{ forloop.counter}}</td>
                <td>{{ log.username }}</td>
                <td>{{ log.email }}</td>
                <td>{{ log.mobile }}</td>
                <td>{{ log.created_date|date:"d-M-Y" }}</td>
                {% comment %} <td>{{log.updated_date}}</td> {% endcomment %}
                <td>{{ log.status }}</td>
                <td>{{ log.duration }}</td>
              
                <td>
                  <a class="btn btn-outline-success btn-sm" href="{% url 'leam_lead_show' log.id 'None' %}"><i
                      class="bi bi-eye"></i>
                      View
                    </a>
                </td>
                {% comment %} <td>
                  <a class="btn btn-sm" data-toggle="modal" data-target="#ModalLoginForm{{staff.id}}"
                    href="{% url 'staffedit' log.id %}">Edit</a>
                </td> {% endcomment %}
                <td>
                  <a class="btn btn-outline-info btn-sm" href="{% url 'incentive_slap_staff' log.id %}">Incentives</a>
                </td>
                <td>
                  <a class="btn btn-outline-success btn-sm" href="{% url 'staff_calendar' log.id %}">Earn</a>
                </td>
             
                <td>
                  <a class="btn btn-sm" data-toggle="modal" data-target="#ModalLoginForm{{user.id}}"
                    href="{% url 'staffedit' log.id %}">Edit</a>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
{% endif %}
<!-- Your existing modal code -->
<div class="modal fade" id="statusSuccessModal" tabindex="-1" role="dialog" data-bs-backdrop="static"
  data-bs-keyboard="false">
  <div class="modal-dialog modal-dialog-centered modal-sm" role="document">
    <div class="modal-content">
      <div class="modal-body text-center p-lg-4">
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 130.2 130.2">
          <circle class="path circle" fill="none" stroke="#198754" stroke-width="6" stroke-miterlimit="10" cx="65.1"
            cy="65.1" r="62.1" />
          <polyline class="path check" fill="none" stroke="#198754" stroke-width="6" stroke-linecap="round"
            stroke-miterlimit="10" points="100.2,40.2 51.5,88.8 29.8,67.5 " />
        </svg>
        <h4 class="text-success mt-3">Oh Yeah!</h4>
        <p class="mt-3"> {% for message in messages %}
          {{ message }}
          {% endfor %}</p>
        <button type="button" class="btn btn-sm mt-3 btn-success" data-bs-dismiss="modal">Ok</button>
      </div>
    </div>
  </div>
</div>

<script>
  function searchTable() {
    var input, filter, table, tr, td, i, txtValue;
    input = document.getElementById("searchInput");
    filter = input.value.toUpperCase();
    table = document.getElementById("myTable");
    tr = table.getElementsByTagName("tr");

    // Loop through all table rows, and hide those that don't match the search query
    for (i = 0; i < tr.length; i++) {
      var rowShouldBeVisible = false;

      // Loop through all cells of current row
      for (j = 0; j < tr[i].cells.length; j++) {
        td = tr[i].cells[j];
        if (td) {
          txtValue = td.textContent || td.innerText;
          if (txtValue.toUpperCase().indexOf(filter) > -1) {
            rowShouldBeVisible = true;
            break; // If a match is found in this row, no need to check further
          }
        }
      }
      if (rowShouldBeVisible) {
        tr[i].style.display = "";
      } else {
        tr[i].style.display = "none";
      }
    }

  }
  function showInputRows() {
    const input = document.getElementById("rowInput").value;
    const count = parseInt(input) || 'all';
    showRows(count);
  }

  function showRows(count) {
    const rows = document.querySelectorAll("#myTable tbody tr");
    rows.forEach((row, index) => {
      if (count === 'all' || index < count) {
        row.style.display = "";
      } else {
        row.style.display = "none";
      }
    });
  }

  function toggleRow(button) {
    var row = button.parentNode.parentNode;
    if (row.classList.contains('selected')) {
      row.classList.remove('selected');
      button.style.backgroundColor = 'white';
    } else {
      row.classList.add('selected');
      button.style.backgroundColor = 'black';
    }
  }

  function toggleAllRows() {
    var buttons = document.querySelectorAll('.select-button');
    var allSelected = true;
    buttons.forEach(function (button) {
      var row = button.parentNode.parentNode;
      if (!row.classList.contains('selected')) {
        allSelected = false;
      }
    });

    buttons.forEach(function (button) {
      var row = button.parentNode.parentNode;
      if (allSelected) {
        row.classList.remove('selected');
        button.style.backgroundColor = 'white';
      } else {
        row.classList.add('selected');
        button.style.backgroundColor = 'black';
      }
    });
  }

</script>
<style>
  .table {
    width: 100%;
    border-collapse: collapse;
  }


  .table th,
  .table td {
    padding: 10px;
    text-align: left;
  }

  .select-button {
    width: 16px;
    height: 16px;
    border: 1px solid black;
    display: inline-block;
    cursor: pointer;
    margin: 0;
    padding: 0;
    background-color: white;
    position: relative;
  }

  .select-button::before {
    content: '';
    position: absolute;
    top: 2px;
    left: 5px;
    width: 5px;
    height: 10px;
    /* border: solid black; */
    border-width: 0 2px 2px 0;
    transform: rotate(45deg);
    opacity: 0;
    transition: opacity 0.2s;
  }

  .selected .select-button::before {
    opacity: 3;
  }

  .selected {
    background-color: #d3d3d3;
    /* Light grey background for selected rows */
  }

  .input-container {
    margin-bottom: 10px;
  }

  #rowInput {
    border: 1px solid black;
    padding: 4px;
    width: 50px;
    /* Adjust width as needed */
    font-size: 14px;
    /* Adjust font size as needed */
  }

    

    @media (min-width: 200px) and (max-width: 500px) { 
      .admin-title { 
        font-size: 12px; } 
      .desh-card {
       
          height: 65px;
          
      } 
    }

    .custom-row {
  display: flex;
  flex-wrap: nowrap !important;
}
</style>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
  function updateStatus(inquiryId) {
    // Prompt the user for confirmation (optional)
    const confirmUpdate = confirm("Are you sure you want to update the status?");
    if (!confirmUpdate) return;

    // Perform the AJAX request
    $.ajax({
      url: '{% url "update_delivery" %}', // Replace with your actual URL endpoint
      method: 'POST',
      data: {
        id: inquiryId,
        csrfmiddlewaretoken: '{{ csrf_token }}' // Required for Django CSRF protection
      },
      success: function(response) {
        if (response.status === 'success') {
          alert('Status updated successfully!');
          // Optionally reload the page or update the UI dynamically
          location.reload();
        } else {
          alert('Failed to update status: ' + response.message);
        }
      },
      error: function() {
        alert('An error occurred while updating the status.');
      }
    });
  }
</script>

{% comment %} function searchTable() {
var input, filter, table, tr, td, i, txtValue;
input = document.getElementById("searchInput");
print(input, 'HHHHHHHHHHHHH')
filter = input.value.toUpperCase();
table = document.getElementById("myTable");
tr = table.getElementsByTagName("tr");

// Loop through all table rows, and hide those that don't match the search query
for (i = 0; i < tr.length; i++) { var rowShouldBeVisible=false; // Loop through all cells of current row for (j=0; j <
  tr[i].cells.length; j++) { td=tr[i].cells[j]; if (td) { txtValue=td.textContent || td.innerText; if
  (txtValue.toUpperCase().indexOf(filter)> -1) {
  rowShouldBeVisible = true;
  break; // If a match is found in this row, no need to check further
  }
  }
  }
  if (rowShouldBeVisible) {
  tr[i].style.display = "";
  } else {
  tr[i].style.display = "none";
  }
  }

  } {% endcomment %}

  {% endblock %}