{% extends template %}
{% comment %} {% extends request.user.is_superuser|yesno:'base.html,admin_dashboard/staff/base.html' %} {% endcomment %}


{% block content %}
{% load static %}

<div class="dashboard-main-body add_user_profile">


  <div class="dash-title">New Staff Add</div>
  {% comment %}

  {% endcomment %}


  <div class="card border Staffbody position-relative">
  
    <div class="">


      {% if messages %}
      {% for message in messages %}
      <div class="alert alert-success">
        {{ message }}
      </div>
      {% endfor %}
      {% endif %}



      <form method="POST" action="{% url 'add_staff' %}" enctype="multipart/form-data">
        {% csrf_token %}


        {% if request.user.is_superuser %}

        <div class="selectadmin">
          <select id="admin-select" class="form-select mb-3" name="admin_id" aria-label="Default select example"
            data-url="{% url 'get_team_leaders_admin_side' %}" required>
            <option value="" selected disabled class="mx-auto text-center">Select admin </option>
            {% for admin in all_admins %}
            <option value="{{ admin.id }}">{{ admin.name }}</option>
            {% endfor %}
          </select>
          <select id="team-leader-select" class="form-select" name="team_leader_id" aria-label="Default select example"
            required>
            <option value="" selected disabled class="mx-auto text-center">Select team-leader </option>
            <!-- Options will be populated by JavaScript -->
          </select>
          {% endif %}
          {% if request.user.is_admin %}
          <select id="team-leader-select" class="form-select" name="team_leader_id" aria-label="Default select example"
            required>
            <option value="" selected disabled class="mx-auto text-center">Select team-leader </option>
            {% for admin in all_teamleader %}
            <option value="{{ admin.id }}">{{ admin.name }}</option>
            {% endfor %}
            <!-- Options will be populated by JavaScript -->
          </select>
          {% endif %}
        </div>


        <div class="row">
          <div class="col-md-6 col-sm-12">
            <div class="subtitle"> Personal Details </div>
            <div class="row">
              <div class="col-md-6 col-sm-12">
                <div class="form-group">
                  <label class="form-label">Name</label>
                  <input type="text" class="form-control radius-8" id="name" name="name" placeholder="Name"
                    style="width: 100%;" maxlength="20" required>
                </div>
              </div>
              <div class="col-md-6 col-sm-12">
                <div class="form-group">
                  <label class="form-label">E-Mail Address</label>
                  <input type="email" class="form-control radius-8" id="name" name="email" placeholder="email"
                    style="width: 100%;" maxlength="20" required>
                </div>
              </div>
              <div class="col-md-6 col-sm-12">
                <div class="form-group">
                  <label class="form-label">Password</label>
                  <input type="Password" class="form-control radius-8" id="name" name="password" placeholder="Password"
                    style="width: 100%;" maxlength="20" required>
                </div>
              </div>
              <div class="col-md-6 col-sm-12">
                <div class="form-group">
                  <label class="form-label">Date Of Birth</label>
                  <input type="date" class="form-control radius-8" id="name" name="dob" placeholder="date"
                    style="width: 100%;" maxlength="20" required>
                </div>
              </div>
              <div class="col-md-6 col-sm-12">
                <div class="form-group">
                  <label class="form-label">Pan Card</label>
                  <input type="text" class="form-control radius-8" id="name" name="pancard" placeholder="pancard"
                    style="width: 100%;" maxlength="20" required>
                </div>
              </div>
              <div class="col-md-6 col-sm-12">
                <div class="form-group">
                  <label class="form-label">Aadhar Card</label>
                  <input type="text" class="form-control radius-8" id="name" name="aadharCard"
                    placeholder="Aadhar Card" style="width: 100%;" maxlength="20" required>
                </div>
              </div>
              <div class="col-md-6 col-sm-12">
                <div class="form-group">
                  <label class="form-label">MarkSheets</label>
                  <input type="number" class="form-control radius-8" id="name" name="marksheet" placeholder="MarkSheets"
                    style="width: 100%;" maxlength="20" required>
                </div>
              </div>
              <div class="col-md-6 col-sm-12">
                <div class="form-group">
                  <label class="form-label">Degree</label>
                  <input type="number" class="form-control radius-8" id="Degree" name="degree" placeholder="Degree"
                    style="width: 100%;" maxlength="20" required>
                </div>
              </div>
              <div class="col-md-6 col-sm-12">
                <div class="form-group">
                  <label class="form-label">City</label>
                  <input type="text" class="form-control radius-8" id="City" name="city" placeholder="City"
                    style="width: 100%;" maxlength="20" required>
                </div>
              </div>
              <div class="col-sm-6 col-12">
                <div class="form-group">

                  <label for="stateSelect" class="form-label">State</label>

                  <select class="form-select" name="state" aria-label="Default select example" required>
                    <option value="">Select a state</option>
                    <option value="Andhra Pradesh">Andhra Pradesh</option>
                    <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                    <option value="Assam">Assam</option>
                    <option value="Bihar">Bihar</option>
                    <option value="Chhattisgarh">Chhattisgarh</option>
                    <option value="Goa">Goa</option>
                    <option value="Gujarat">Gujarat</option>
                    <option value="Haryana">Haryana</option>
                    <option value="Himachal Pradesh">Himachal Pradesh</option>
                    <option value="Jharkhand">Jharkhand</option>
                    <option value="Karnataka">Karnataka</option>
                    <option value="Kerala">Kerala</option>
                    <option value="Madhya Pradesh">Madhya Pradesh</option>
                    <option value="Maharashtra">Maharashtra</option>
                    <option value="Manipur">Manipur</option>
                    <option value="Meghalaya">Meghalaya</option>
                    <option value="Mizoram">Mizoram</option>
                    <option value="Nagaland">Nagaland</option>
                    <option value="Odisha">Odisha</option>
                    <option value="Punjab">Punjab</option>
                    <option value="Rajasthan">Rajasthan</option>
                    <option value="Sikkim">Sikkim</option>
                    <option value="Tamil Nadu">Tamil Nadu</option>
                    <option value="Telangana">Telangana</option>
                    <option value="Tripura">Tripura</option>
                    <option value="Uttar Pradesh">Uttar Pradesh</option>
                    <option value="Uttarakhand">Uttarakhand</option>
                    <option value="West Bengal">West Bengal</option>
                  </select>
                </div>
              </div>
              <div class="col-md-6 col-sm-12">
                <div class="form-group">
                  <label class="form-label">Mobile</label>
                  <input type="number" class="form-control radius-8" id="mobile" name="mobile" placeholder="number"
                    style="width: 100%;" maxlength="20" required style="width: 100%;"
                    oninput="if(this.value.length > 10) this.value = this.value.slice(0, 10);" min="999999999"
                    max="9999999999" required>
                </div>
              </div>
              <div class="col-md-6 col-sm-12">
                <div class="form-group">
                  <label class="form-label">Salary</label>
                  <input type="number" class="form-control radius-8" id="Salary" name="salary" placeholder="Salary"
                    style="width: 100%;" maxlength="20" required>
                </div>
              </div>
            </div>
          </div>

          <div class="col-md-6 col-sm-12">
            <div class="subtitle"> Account Details </div>
            <div class="row">
              <div class="col-md-6 col-sm-12">
                <div class="form-group">

                  <label class="form-label"> Account Number</label>
                  <input type="number" class="form-control radius-8" id="account_number" name="account_number"
                    placeholder="accountnumber" style="width: 100%;" maxlength="20" required style="width: 100%;"
                    oninput="if(this.value.length > 16) this.value = this.value.slice(0, 16);">
                </div>
              </div>
              <div class="col-md-6 col-sm-12">
                <div class="form-group">
                  <label class="form-label">Add UPI</label>
                  <input type="text" class="form-control radius-8" id="upi_id" name="upi_id" placeholder="Enter UPI ID"
                    style="width: 100%;" maxlength="20" required>
                </div>
              </div>
              <div class="col-md-6 col-sm-12">
                <div class="form-group">
                  <label class="form-label">Bank Name</label>
                  <input type="text" class="form-control radius-8" id="bank_name" name="bank_name"
                    placeholder="Bank Name" style="width: 100%;" maxlength="20" required>
                </div>
              </div>
              <div class="col-md-6 col-sm-12">
                <div class="form-group">
                  <label class="form-label">IFSC Code</label>
                  <input type="text" class="form-control radius-8" id="ifsc_code" name="ifsc_code"
                    placeholder="IFSC Code" style="width: 100%;" maxlength="20" required>
                </div>
              </div>
              <div class="col-md-12 col-sm-12">
                <div class="form-group">
                  <label class="form-label">Pincode</label>
                  <input type="number" class="form-control radius-8" id="Pincode" name="pincode" placeholder="Pincode"
                    style="width: 100%;" maxlength="20" required style="width: 100%;"
                    oninput="if(this.value.length > 6) this.value = this.value.slice(0, 6);" min="99999" max="999999">
                </div>
              </div>
              <div class="col-md-12 col-sm-12">
                <div class="form-group">
                  <label class="form-label">Address</label>
                  <textarea class="form-control" name="address" id="address" rows="3"></textarea>
                </div>
              </div>
            </div>
          </div>


        </div>

        <div class="d-flex align-items-center justify-content-end gap-3">
          <input type="submit" class="btn text-md px-56 py-12 radius-8" />
        </div>

      </form>


 
    </div>
  </div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
  $(document).ready(function () {
    $('#admin-select').change(function () {
      var adminId = $(this).val();
      var url = $(this).data('url'); // URL to fetch team leaders

      if (adminId) {
        $.ajax({
          url: url,
          data: {
            'admin_id': adminId
          },
          success: function (data) {
            var $teamLeaderSelect = $('#team-leader-select');
            $teamLeaderSelect.empty(); // Clear previous options
            $teamLeaderSelect.append('<option selected> Select team-leader </option>');

            $.each(data.team_leaders, function (index, teamLeader) {
              $teamLeaderSelect.append('<option value="' + teamLeader.id + '">' + teamLeader.name + '</option>');
            });
          }
        });
      } else {
        $('#team-leader-select').empty().append('<option selected> Select team-leader </option>');
      }
    });
  });
</script>


{% endblock %}